==================== JOB STARTED ====================
Start time: 2025年 08月 11日 星期一 18:38:50 CST
Working directory: /home/fanggang_1/hk/nnunet/nnUNet
Job ID: 4635.mgt
Mon Aug 11 18:38:51 2025       
+---------------------------------------------------------------------------------------+
| NVIDIA-SMI 535.129.03             Driver Version: 535.129.03   CUDA Version: 12.2     |
|-----------------------------------------+----------------------+----------------------+
| GPU  Name                 Persistence-M | Bus-Id        Disp.A | Volatile Uncorr. ECC |
| Fan  Temp   Perf          Pwr:Usage/Cap |         Memory-Usage | GPU-Util  Compute M. |
|                                         |                      |               MIG M. |
|=========================================+======================+======================|
|   0  NVIDIA GeForce RTX 4090        Off | 00000000:34:00.0 Off |                  Off |
|  0%   38C    P8              23W / 450W |     13MiB / 24564MiB |      0%      Default |
|                                         |                      |                  N/A |
+-----------------------------------------+----------------------+----------------------+
|   1  NVIDIA GeForce RTX 4090        Off | 00000000:8E:00.0 Off |                  Off |
|  0%   32C    P8              27W / 450W |     31MiB / 24564MiB |      0%      Default |
|                                         |                      |                  N/A |
+-----------------------------------------+----------------------+----------------------+
                                                                                         
+---------------------------------------------------------------------------------------+
| Processes:                                                                            |
|  GPU   GI   CI        PID   Type   Process name                            GPU Memory |
|        ID   ID                                                             Usage      |
|=======================================================================================|
|    0   N/A  N/A      3108      G   /usr/libexec/Xorg                             4MiB |
|    1   N/A  N/A      3108      G   /usr/libexec/Xorg                             9MiB |
|    1   N/A  N/A      3198      G   /usr/bin/gnome-shell                          8MiB |
+---------------------------------------------------------------------------------------+
Python version: Python 3.12.9
PyTorch version: 2.6.0+cu124
==================== 二次蒸馏环境验证 ====================
教师模型路径: /home/fanggang_1/hk/nnunet/nnUNet/nnunetv2/DATASET/nnUNet_results/Dataset015_flare25/nnUNetTrainerLightweightDistillation__nnUNetPlans__3d_lowres/fold_0/checkpoint_final.pth
4层学生Plans: nnUNetPlans
蒸馏温度: 2.0
蒸馏权重 α: 0.8, β: 0.2
✅ 教师模型文件存在
✅ 4层学生Plans文件存在: nnUNetPlans
   路径: /home/fanggang_1/hk/nnunet/nnUNet/nnunetv2/DATASET/nnUNet_preprocessed/Dataset015_flare25/nnUNetPlans.json
===========================================================
Running nnUNet 二次蒸馏训练 with real-time logging...
================================================================================
🧮 轻量化nnUNet模型参数量直接计算
================================================================================
基于文件: nnUNetTrainerLightweightDistillation2nd + plans.json

📋 从plans.json读取的配置:
   阶段数: 4
   特征数: [16, 32, 64, 128]
   卷积层数/阶段: [1, 1, 2, 2]
   解码器卷积层数: [1, 1, 2]
   批次大小: 6
   补丁大小: [80, 128, 128]

🔍 详细参数计算:
============================================================
📈 编码器参数:
   阶段1-卷积1: 1→16, 参数: 92
   阶段1-下采样: 参数: 752
   阶段1总计: 844
   阶段2-卷积1: 16→32, 参数: 1,056
   阶段2-下采样: 参数: 2,016
   阶段2总计: 3,072
   阶段3-卷积1: 32→64, 参数: 3,136
   阶段3-卷积2: 64→64, 参数: 6,080
   阶段3-下采样: 参数: 6,080
   阶段3总计: 15,296
   阶段4-卷积1: 64→128, 参数: 10,368
   阶段4-卷积2: 128→128, 参数: 20,352
   阶段4总计: 30,720
编码器总参数: 49,932

📉 解码器参数:
   解码器阶段1: 77,568
   解码器阶段2: 20,352
   解码器阶段3: 6,320
解码器总参数: 104,240

📤 输出头参数:
   输出层: 16→14, 参数: 238
   深度监督1: 32→14, 参数: 462
   深度监督2: 64→14, 参数: 910
   深度监督3: 128→14, 参数: 1,806
深度监督总参数: 3,178

📊 标准nnUNet模型参数量估算:

================================================================================
📊 参数量对比结果
================================================================================
标准nnUNet模型:
  总参数量: 1.38M (1,377,624)

轻量化nnUNet模型 (深度可分离卷积):
  总参数量: 157.59K (157,588)

🎯 优化效果:
  参数减少因子: 8.7×
  模型压缩率: 88.6%
  参数节省: 1.22M

✅ 详细结果已保存到: /home/fanggang_1/hk/nnunet/nnUNet/lightweight_model_params_analysis.json

============================================================
📝 论文用数据摘要:
============================================================
• 轻量化模型参数量: 157.59K
• 参数减少因子: 8.7×
• 模型压缩率: 88.6%
• 架构: 4阶段深度可分离3D U-Net
• 特征通道: [16, 32, 64, 128]
Exit status: 0
End time: 2025年 08月 11日 星期一 18:38:54 CST
==================== JOB FINISHED ====================
